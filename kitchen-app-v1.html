<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="kitchen-app-style.css">
    <title>Kitchen-App-v1</title>
</head>
<body>
    <div class="background">
        <div class="app">
            <div class="phone">

                <!-- HOME TAB -->
                <div class="tab-content active" id="tab1">
                    <h2 class="tab-title">Home</h2>
                </div>

                <!-- INVENTORY TAB -->
                <div class="tab-content" id="tab2">
                    <h2 class="tab-title">Inventory</h2>

                    <div style="display: block;" class="inventory-grid-view">
                        <div class="new-inventory">
                            <input type="text" id="new-inventory-name" placeholder="New Inventory Name" required>
                            <button class="new-inventory-button" onclick="createNewInventory()">‚ûï</button>
                        </div>
                        <div class="inventory-grid" id="inventory-grid"></div>
                    </div>

                    <div style="display: none;" class="inventory-content">
                        <button class="back-grid" onclick="showGrid2()">‚¨Ö</button>
                        <h3 id="current-inventory-name" style="text-align:center; margin-bottom: 10px;"></h3>
                        <form class="inventory-form" id="inventory-form" onsubmit="addToInventory2(event)">
                            <div class="input-group">
                                <input type="text" id="inv-item" placeholder="Item" required>
                                <input type="number" id="inv-quantity" placeholder="Quantity" min="1">
                                <button type="submit">‚ûï</button>
                            </div>
                        </form>
                        <div class="inventory-items-container">
                            <h4>Items in this inventory:</h4>
                            <ul id="inventory"></ul>
                        </div>
                    </div>
                </div>

                <!-- SHOPPING LIST TAB -->
                <div class="tab-content" id="tab3">
                    <h2 class="tab-title">Shopping Lists</h2>
                    <!-- Shopping List UI unchanged -->

                    <div style="display: block;" class="shopping-lists-grid-view" if="shopping-lists-grid-view">
                        <div class="new-list">  
                            <input type="text" id="new-list-name" placeholder="New List Name" required>
                            <button class="new-list-button" onclick="createNewList()">‚ûï</button>
                        </div>

                        <div class="shopping-lists-grid" id="shopping-lists-grid"></div>

                    </div>

                    <div style="display: none;" class="shopping-list-content">
                        <button class="back-grid" onclick="showGrid()">‚¨Ö</button>
                        <form class="shopping-list-form" id="shopping-list-form" onsubmit="addItem(event)">
                            <div class="input-group">
                                <input type="text" id="item" placeholder="Item" required>
                                <input type="number" id="quantity" placeholder="Quantity" min="1" >
                                <button type="submit">‚ûï</button>
                            </div>
                        </form>
                        <div class="inventory-items-container">
                            <h4>Items in this shopping list:</h4>
                            <ul id="shopping-list"></ul>
                        </div>
                    </div>
                </div>

                <!-- RECIPES TAB -->
                <div class="tab-content" id="tab4">
                    <h2 class="tab-title">Recipes</h2>
                    <button onclick="renderRecipes()">üîÑ Refresh</button>
                    <ul id="recipe-list"></ul>
                </div>

                <!-- PROFILE TAB -->
                <div class="tab-content" id="tab5">
                    <h2 class="tab-title">Profile</h2>
                    <!-- Profile UI unchanged -->
                </div>

                <!-- TAB BAR -->
                <div class="tab-bar">
                    <button class="active" onclick="showTab(1)">üè†<br>Home</button>
                    <button onclick="showTab(2)">ü•ö<br>Inventory</button>
                    <button onclick="showTab(3)">üìã<br>Shopping List</button>
                    <button onclick="showTab(4)">üìñ<br>Recipes</button>
                    <button onclick="showTab(5)">üë§<br>Profile</button>

                    <script>
                        function showTab(tabNum) {
                            document.querySelectorAll(".tab-content").forEach(el => el.classList.remove("active"));
                            document.getElementById("tab" + tabNum).classList.add("active");

                            document.querySelectorAll(".tab-bar button").forEach(btn => btn.classList.remove("active"));
                            document.querySelectorAll(".tab-bar button")[tabNum - 1].classList.add("active");

                            if (tabNum === 4) {
                                renderRecipes();
                            }
                        }
                    </script>
                </div>

            </div>
        </div>
    </div>

    <script>
        const inventories = { 'Fridge': [] };
        let currentInventory = 'Fridge';
        let inventory = inventories[currentInventory];

        function updateGrid2() {
            const grid = document.getElementById("inventory-grid");
            grid.innerHTML = '';

            for (const inventoryName in inventories) {
                const inventoryDiv = document.createElement('div');
                inventoryDiv.className = 'inventory-item';
                inventoryDiv.textContent = inventoryName;
                inventoryDiv.onclick = () => showInventory(inventoryName);
                grid.appendChild(inventoryDiv);
            }
        }

        function createNewInventory() {
            const newInventoryName = document.getElementById('new-inventory-name').value.trim();
            if (newInventoryName) {
                inventories[newInventoryName] = [];
                updateGrid2();
            }
        }

        function showInventory(inventoryName) {
            currentInventory = inventoryName;
            inventory = inventories[inventoryName];

            document.querySelector('.inventory-grid-view').style.display = 'none';
            document.querySelector('.inventory-content').style.display = 'block';

            const heading = document.getElementById("current-inventory-name");
            if (heading) {
                heading.textContent = inventoryName;
            }

            updateInventory();
        }

        function showGrid2() {
            document.querySelector('.inventory-grid-view').style.display = 'block';
            document.querySelector('.inventory-content').style.display = 'none';
        }

        function addToInventory2(event) {
            event.preventDefault();
            const item = document.getElementById('inv-item').value.trim();
            let quantity = document.getElementById('inv-quantity').value;
            if (!quantity) quantity = 1;
            addToInventory(item, quantity);
            document.getElementById('inventory-form').reset();
        }

        function addToInventory(item, quantity) {
            const existingItem = inventory.find(i => i.item.toLowerCase() === item.toLowerCase());
            if (existingItem) {
                existingItem.quantity += parseInt(quantity, 10);
            } else {
                inventory.push({ item, quantity: parseInt(quantity, 10) });
            }
            updateInventory();
        }

        function updateInventory() {
            const list = document.getElementById('inventory');
            list.innerHTML = '';

            inventory.forEach((entry, index) => {
                const listItem = document.createElement('li');
                listItem.textContent = `${entry.item} (${entry.quantity})`;

                const plusButton = document.createElement('button');
                const minusButton = document.createElement('button');
                const removeButton = document.createElement('button');

                plusButton.textContent = '‚ûï';
                minusButton.textContent = '‚ûñ';
                removeButton.textContent = '‚ùå';

                plusButton.onclick = () => addToInventory(entry.item, 1);
                minusButton.onclick = () => minusFromInventory(entry.item, 1);
                removeButton.onclick = () => removeFromInventory(index);

                listItem.appendChild(plusButton);
                listItem.appendChild(minusButton);
                listItem.appendChild(removeButton);
                list.appendChild(listItem);
            });
        }

        function minusFromInventory(item, quantity) {
            const existingItem = inventory.find(i => i.item === item);
            if (existingItem) {
                existingItem.quantity -= parseInt(quantity, 10);
                if (existingItem.quantity <= 0) {
                    const index = inventory.indexOf(existingItem);
                    inventory.splice(index, 1);
                }
            }
            updateInventory();
        }

        function removeFromInventory(index) {
            inventory.splice(index, 1);
            updateInventory();
        }

        const shoppingLists = {'List 1':[]};

        let currentList = 'List 1';

        function updateGrid() {
            const grid = document.getElementById("shopping-lists-grid");
            grid.innerHTML = '';

            for (const listName in shoppingLists) {
                const list = document.createElement('div');
                list.className = 'shopping-list';
                list.textContent = listName;

                list.onclick = () => showList(listName);
                grid.appendChild(list);
            }

        }

        function createNewList() {
            const newListName = document.getElementById('new-list-name').value.trim();
            if (newListName) {
                shoppingLists[newListName] = [];
                updateGrid();
            }
        }

        function showList(listName) {
            shoppingList = shoppingLists[listName];
            document.querySelector('.shopping-lists-grid-view').style.display = 'none';
            document.querySelector('.shopping-list-content').style.display = 'block';
            updateShoppingList();
        }
        
        function showGrid() {
            document.querySelector('.shopping-lists-grid-view').style.display = 'block';
            document.querySelector('.shopping-list-content').style.display = 'none';
        }
        function updateShoppingList() {
            const list = document.getElementById('shopping-list');
            list.innerHTML = '';

            shoppingList.forEach((entry, index) => {
                const listItem = document.createElement('li');
                listItem.textContent = `${entry.item} (${entry.quantity})`;

                const removeButton = document.createElement('button');
                const addButton = document.createElement('button');
                
                addButton.textContent = '‚úî Add to Inventory';
                addButton.style.color = 'green';
                removeButton.textContent = '‚ùå';

                addButton.onclick = () => addToInventory(entry.item, entry.quantity);
                removeButton.onclick = () => removeItem(index);
                
                listItem.appendChild(addButton);
                listItem.appendChild(removeButton);
                
                list.appendChild(listItem);
            });
        }

        function addItem(event) {
            event.preventDefault();
            const item = document.getElementById('item').value;
            let quantity = document.getElementById('quantity').value;

            if (!quantity) {
                quantity = 1;
            }

            shoppingList.push({ item, quantity });
            updateShoppingList();

            //const listItem = document.createElement('li');
            //listItem.textContent = `${item} (${quantity})`;

            //document.getElementById('shopping-list').appendChild(listItem);
            document.getElementById('shopping-list-form').reset();
        }

        function removeItem(index) {
            shoppingList.splice(index, 1);
            updateShoppingList();
        }

        updateGrid();   

        const recipes = [
            { name: "Omelette", ingredients: ["Eggs", "Milk", "Salt"] },
            { name: "Pasta", ingredients: ["Pasta", "Tomato Sauce", "Olive Oil"] },
            { name: "Salad", ingredients: ["Lettuce", "Tomato", "Cucumber"] }
        ];

        function getAllInventoryItems() {
            const allItems = new Set();
            for (const invName in inventories) {
                inventories[invName].forEach(entry => allItems.add(entry.item.toLowerCase()));
            }
            return allItems;
        }

        function renderRecipes() {
            const list = document.getElementById("recipe-list");
            list.innerHTML = '';
            const inventoryItems = getAllInventoryItems();
            recipes.forEach(recipe => {
                const li = document.createElement("li");
                li.innerHTML = `<strong>${recipe.name}</strong>: `;
                const hasAllIngredients = recipe.ingredients.every(
                    ing => inventoryItems.has(ing.toLowerCase())
                );
                const symbol = hasAllIngredients ? "‚úÖ" : "‚ùå";
                li.innerHTML += symbol + " ";
                li.title = `Needs: ${recipe.ingredients.join(', ')}`;
                list.appendChild(li);
            });
        }
        updateGrid();
        updateGrid2();
    </script>
</body>
</html>
